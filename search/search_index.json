{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"echoevm","text":"<p>EchoEVM is a minimal, pedagogical Ethereum Virtual Machine (EVM) implementation written in Go. It focuses on transparent bytecode execution, traceability, and ease of experimentation rather than production consensus or networking features.</p>"},{"location":"#whats-new-in-v0017","title":"\ud83c\udd95 What's New in v0.0.17","text":"<ul> <li>Web Debugger Run Control: Trigger traces directly from the UI via the new Run button.</li> <li>Web Debugger Origin Allowlist: Configure allowed WebSocket origins with <code>ECHOEVM_WEB_ALLOWED_ORIGINS</code>.</li> <li>Docs &amp; Version Alignment: Updated docs and tests to reflect the current release.</li> </ul> <p>See ROADMAP.md for the complete version history.</p>"},{"location":"#features","title":"\u2728 Features","text":"Category Features Execution Constructor deployment, runtime calls, bytecode disassembly ABI Support Function selector encoding, primitives, arrays, bytes types Tracing JSON structured per-opcode tracing with pre/post state Gas Metering EIP-2929 compatible dynamic gas calculations EIP Support EIP-1153 (Transient Storage), EIP-5656 (MCOPY) Precompiles ECRECOVER..BLAKE2F (0x01-0x09) Testing Unit tests, integration tests, Ethereum compliance tests Logging Zerolog-based structured logging (plain/JSON output)"},{"location":"#requirements","title":"\u2705 Requirements","text":"<ul> <li>Go 1.23.2+</li> <li>(Optional) <code>solc</code> for compiling <code>.sol</code> files directly</li> </ul>"},{"location":"#installation","title":"\ud83d\udd27 Installation","text":"<p>From source:</p> <pre><code>go install github.com/smallyunet/echoevm/cmd/echoevm@latest\n</code></pre> <p>Clone and build:</p> <pre><code>git clone https://github.com/smallyunet/echoevm.git\ncd echoevm\nmake build\nmake install   # install into GOPATH/bin\n</code></pre> <p>Verify:</p> <pre><code>echoevm --help\n</code></pre>"},{"location":"#quick-start","title":"\ud83d\ude80 Quick Start","text":""},{"location":"#run-bytecode-directly","title":"Run bytecode directly","text":"<pre><code># Simple arithmetic: PUSH1 1 PUSH1 2 ADD\nechoevm run 6001600201\n\n# With debug trace\nechoevm run --debug 6001600201\n</code></pre>"},{"location":"#deploy-and-call-a-contract","title":"Deploy and call a contract","text":"<pre><code># Deploy constructor bytecode\nechoevm deploy -a ./artifacts/Add.json --print\n\n# Call a function with ABI encoding\nechoevm call -a ./artifacts/Add.json -f add(uint256,uint256) -A 2,40\n\n# Generate execution trace\nechoevm trace -a ./artifacts/Add.json -f add(uint256,uint256) -A 7,9 --full | jq .\n</code></pre>"},{"location":"#interactive-repl","title":"Interactive REPL","text":"<pre><code>echoevm repl\n# Type opcodes: PUSH1 10 PUSH1 20 ADD\n</code></pre>"},{"location":"#web-debugger","title":"Web Debugger","text":"<pre><code># Start the web debugger\nechoevm web --code \"6003600401\"\n# Then open http://localhost:8080\n# Click \"Run Trace\" in the UI to start execution.\n</code></pre>"},{"location":"#cli-commands","title":"\ud83d\udda5 CLI Commands","text":"Command Description <code>run</code> Execute raw bytecode with optional debug tracing <code>deploy</code> Run constructor and extract runtime bytecode <code>call</code> Execute runtime bytecode with ABI encoding <code>trace</code> JSON line trace of opcode execution <code>disasm</code> Disassemble bytecode to human-readable opcodes <code>repl</code> Interactive EVM shell <code>web</code> Browser-based visual debugger <code>version</code> Display build metadata"},{"location":"#global-flags","title":"Global Flags","text":"<pre><code>--log-level, -L   Log level (trace|debug|info|warn|error)\n--output, -o      Output format (plain|json)\n--config, -c      Config file path (reserved)\n--rpc-url         Ethereum RPC endpoint\n</code></pre>"},{"location":"#command-examples","title":"Command Examples","text":"deploy - Execute constructor bytecode <pre><code>echoevm deploy -a ./artifacts/Add.json --print\nechoevm deploy -b ./constructor.bin --out-file runtime.bin\n</code></pre> disasm - Disassemble bytecode <pre><code># From hex\nechoevm disasm 6001600201\n# Output:\n# 0000: PUSH1 01\n# 0002: PUSH1 02\n# 0004: ADD\n\n# From artifact\nechoevm disasm -a ./artifacts/Add.json --runtime\n\n# JSON output\nechoevm disasm -o json 6001600201\n</code></pre> call - Execute runtime bytecode <pre><code># With ABI encoding\nechoevm call -a ./artifacts/Add.json -f add(uint256,uint256) -A 2,40\n\n# With raw calldata\nechoevm call -r ./runtime.bin -d 771602f70000...\n</code></pre> trace - Execution trace <pre><code># First 40 steps\nechoevm trace -a ./artifacts/Add.json -f add(uint256,uint256) -A 1,2 --limit 40 | jq .\n\n# Full pre/post state\nechoevm trace -a ./artifacts/Loops.json -f forLoop(uint256) -A 5 --full | jq .\n</code></pre>"},{"location":"#abi-encoding","title":"\ud83d\udce6 ABI Encoding","text":"<p>Supported types for <code>--function/--args</code> encoding:</p> Type Examples Integers <code>uint8</code>, <code>uint256</code>, <code>int128</code>, etc. Boolean <code>true</code>, <code>false</code> Address <code>0x742d35Cc...</code> (40 hex chars) String UTF-8 dynamic strings Bytes <code>bytes</code> (dynamic), <code>bytes32</code> (fixed) Arrays <code>uint256[]</code>, <code>address[]</code> <p>Array syntax:</p> <pre><code>echoevm call -a ./artifacts/Sum.json -f sum(uint256[]) -A \"[1;2;3;4;5]\"\nechoevm call -a ./artifacts/Multi.json -f send(address[]) -A \"[0xabc...;0xdef...]\"\n</code></pre> <p>Note: Tuples and nested arrays are supported.</p>"},{"location":"#testing","title":"\ud83e\uddea Testing","text":"<pre><code>make test             # Run all tests (unit, integration, compliance)\nmake test-unit        # Run Go unit tests\nmake test-integration # Run integration tests\nmake test-compliance  # Run Ethereum compliance tests\nmake setup-tests      # Download test fixtures (~100MB)\n</code></pre>"},{"location":"#architecture","title":"\ud83c\udfd7 Architecture","text":"<pre><code>echoevm/\n\u251c\u2500\u2500 cmd/echoevm/     # CLI commands (deploy, call, trace, etc.)\n\u251c\u2500\u2500 internal/\n\u2502   \u251c\u2500\u2500 evm/\n\u2502   \u2502   \u251c\u2500\u2500 core/    # Stack, memory, opcode table\n\u2502   \u2502   \u2514\u2500\u2500 vm/      # Interpreter, opcode implementations\n\u2502   \u251c\u2500\u2500 config/      # Constants, environment variables\n\u2502   \u251c\u2500\u2500 logger/      # Zerolog wrapper\n\u2502   \u2514\u2500\u2500 errors/      # Error definitions\n\u251c\u2500\u2500 tests/           # Integration and compliance tests\n\u2514\u2500\u2500 docs/            # Documentation\n</code></pre>"},{"location":"#supported-opcode-categories","title":"Supported Opcode Categories","text":"<p>Arithmetic, Bitwise, Comparison, Stack, Memory, Storage, Control Flow, Environment, Call/Return/Revert, Logging, System.</p>"},{"location":"#configuration","title":"\u2699\ufe0f Configuration","text":"<p>See Configuration and Logging Guide for details.</p> <p>Environment variables:</p> <pre><code>export ECHOEVM_LOG_LEVEL=debug\nexport ECHOEVM_GAS_LIMIT=30000000\nexport ECHOEVM_ETHEREUM_RPC=\"https://mainnet.infura.io/v3/&lt;key&gt;\"\n</code></pre>"},{"location":"#exit-codes","title":"\ud83d\udea6 Exit Codes","text":"Code Meaning 0 Successful execution 1 Execution reverted (REVERT) 2 Invalid arguments / configuration error"},{"location":"#roadmap","title":"\ud83d\uddfa Roadmap","text":"<p>See ROADMAP.md for the complete development roadmap.</p> <p>Upcoming: - Tuple and nested array ABI support - Fork-specific opcode behavior (Cancun) - Improved compliance test coverage - Web-based debugger UI</p>"},{"location":"#contributing","title":"\ud83e\udd1d Contributing","text":"<ol> <li>Fork the repository</li> <li>Create a feature branch (<code>feat/&lt;topic&gt;</code>)</li> <li>Add/update tests</li> <li>Run <code>make test</code> and ensure build is clean</li> <li>Open a PR with clear description</li> </ol> <p>Issues and discussions for roadmap ideas are welcome!</p>"},{"location":"#license","title":"\ud83d\udcc4 License","text":"<p>This project is open source under the MIT License. See LICENSE for details.</p> <p> If you're using EchoEVM in research, experiments, or education, a citation or link back is appreciated. </p>"},{"location":"guides/configuration/","title":"EchoEVM Configuration Guide","text":"<p>This document describes the configuration options available in EchoEVM and how to customize them.</p>"},{"location":"guides/configuration/#configuration-sources","title":"Configuration Sources","text":"<p>EchoEVM supports configuration through multiple sources in the following order of precedence:</p> <ol> <li>Command line flags (highest priority)</li> <li>Environment variables</li> <li>Default constants (lowest priority)</li> </ol>"},{"location":"guides/configuration/#environment-variables","title":"Environment Variables","text":"<p>You can override default configuration values using the following environment variables:</p>"},{"location":"guides/configuration/#network-configuration","title":"Network Configuration","text":"<ul> <li><code>ECHOEVM_ETHEREUM_RPC</code>: Ethereum RPC endpoint (default: <code>https://cloudflare-eth.com</code>)</li> </ul>"},{"location":"guides/configuration/#logging-configuration","title":"Logging Configuration","text":"<ul> <li><code>ECHOEVM_LOG_LEVEL</code>: Log level (default: <code>info</code>)</li> <li><code>ECHOEVM_LOG_FORMAT</code>: Log format - \"json\" or \"console\" (default: <code>console</code>)</li> <li><code>ECHOEVM_LOG_OUTPUT</code>: Log output - \"stdout\", \"stderr\", or file path (default: <code>stdout</code>)</li> </ul>"},{"location":"guides/configuration/#evm-configuration","title":"EVM Configuration","text":"<ul> <li><code>ECHOEVM_GAS_LIMIT</code>: Default gas limit for transactions (default: <code>15000000</code>)</li> <li><code>ECHOEVM_BLOCK_GAS_LIMIT</code>: Default gas limit for blocks (default: <code>15000000</code>)</li> <li><code>ECHOEVM_CHAIN_ID</code>: Default chain ID (default: <code>1</code>)</li> <li><code>ECHOEVM_EXECUTION_MODE</code>: Default execution mode (default: <code>full</code>)</li> </ul>"},{"location":"guides/configuration/#api-configuration","title":"API Configuration","text":"<ul> <li><code>ECHOEVM_API_NAMESPACE</code>: Default API namespace (default: <code>eth</code>)</li> <li><code>ECHOEVM_API_VERSION</code>: Default API version (default: <code>1.0</code>)</li> <li><code>ECHOEVM_API_PUBLIC</code>: Default API public flag (default: <code>true</code>)</li> </ul>"},{"location":"guides/configuration/#web-debugger-configuration","title":"Web Debugger Configuration","text":"<ul> <li><code>ECHOEVM_WEB_ALLOWED_ORIGINS</code>: Comma-separated allowed WebSocket origins. Use <code>*</code> to allow all origins. Empty means same-origin only.</li> </ul>"},{"location":"guides/configuration/#usage-examples","title":"Usage Examples","text":""},{"location":"guides/configuration/#setting-log-level","title":"Setting Log Level","text":"<pre><code>export ECHOEVM_LOG_LEVEL=\"debug\"\nechoevm run 6001600201\n</code></pre>"},{"location":"guides/configuration/#setting-gas-limit","title":"Setting Gas Limit","text":"<pre><code>export ECHOEVM_GAS_LIMIT=\"30000000\"\nechoevm run 6001600201\n</code></pre>"},{"location":"guides/configuration/#setting-ethereum-rpc-endpoint","title":"Setting Ethereum RPC Endpoint","text":"<pre><code>export ECHOEVM_ETHEREUM_RPC=\"https://mainnet.infura.io/v3/&lt;key&gt;\"\nechoevm run 6001600201\n</code></pre>"},{"location":"guides/configuration/#using-json-logging","title":"Using JSON Logging","text":"<pre><code>export ECHOEVM_LOG_FORMAT=\"json\"\nexport ECHOEVM_LOG_LEVEL=\"debug\"\nechoevm run 6001600201\n</code></pre>"},{"location":"guides/configuration/#configuration-constants","title":"Configuration Constants","text":"<p>The following constants are defined in <code>internal/config/constants.go</code>:</p>"},{"location":"guides/configuration/#evm-constants","title":"EVM Constants","text":"<ul> <li><code>StackLimit</code>: Maximum stack size (1024)</li> <li><code>DefaultGasLimit</code>: Default transaction gas limit (15000000)</li> <li><code>DefaultBlockGasLimit</code>: Default block gas limit (15000000)</li> <li><code>LogsBloomSize</code>: Logs bloom filter size (256)</li> <li><code>DefaultTimestamp</code>: Default block timestamp (1640995200)</li> </ul>"},{"location":"guides/configuration/#network-constants","title":"Network Constants","text":"<ul> <li><code>DefaultEthereumRPC</code>: Default Ethereum RPC endpoint (\"https://cloudflare-eth.com\")</li> <li><code>DefaultChainID</code>: Default chain ID (1)</li> </ul>"},{"location":"guides/configuration/#logging-constants","title":"Logging Constants","text":"<ul> <li><code>DefaultLogLevel</code>: Default log level (\"info\")</li> <li><code>DefaultLogFormat</code>: Default log format (\"console\")</li> <li><code>DefaultLogOutput</code>: Default log output (\"stdout\")</li> <li><code>DefaultLogComponent</code>: Default log component (\"echoevm\")</li> <li><code>DefaultLogVersion</code>: Default log version (\"1.0.0\")</li> <li><code>DefaultLogTimeFormat</code>: Default log time format (time.RFC3339)</li> <li><code>DefaultLogFileMode</code>: Default log file mode (0666)</li> </ul>"},{"location":"guides/configuration/#api-constants","title":"API Constants","text":"<ul> <li><code>DefaultAPINamespace</code>: Default API namespace (\"eth\")</li> <li><code>DefaultAPIVersion</code>: Default API version (\"1.0\")</li> <li><code>DefaultAPIPublic</code>: Default API public flag (true)</li> </ul>"},{"location":"guides/configuration/#execution-constants","title":"Execution Constants","text":"<ul> <li><code>DefaultExecutionMode</code>: Default execution mode (\"full\")</li> <li><code>DefaultGasPrice</code>: Default gas price (20000000000)</li> <li><code>DefaultValue</code>: Default transaction value (0)</li> </ul>"},{"location":"guides/configuration/#file-constants","title":"File Constants","text":"<ul> <li><code>DefaultFileMode</code>: Default file mode (0644)</li> <li><code>DefaultDirectoryMode</code>: Default directory mode (0755)</li> </ul>"},{"location":"guides/configuration/#best-practices","title":"Best Practices","text":"<ol> <li> <p>Use Environment Variables: For production deployments, use environment variables to configure the application rather than hardcoding values.</p> </li> <li> <p>Logging: Use JSON format for production logging to enable better log aggregation and analysis.</p> </li> <li> <p>Security: Be careful with file permissions when logging to files. The default file mode is 0666, but you may want to use more restrictive permissions in production.</p> </li> <li> <p>Performance: Adjust gas limits and upstream RPC endpoints based on your specific use case and network conditions.</p> </li> <li> <p>Monitoring: Use appropriate log levels to balance between debugging information and performance.</p> </li> </ol>"},{"location":"guides/configuration/#migration-from-hardcoded-values","title":"Migration from Hardcoded Values","text":"<p>If you're migrating from a version with hardcoded values, you can:</p> <ol> <li>Set environment variables to match your previous hardcoded values</li> <li>Gradually adjust them based on your new requirements</li> <li>Use the configuration system to make your deployment more flexible</li> </ol>"},{"location":"guides/configuration/#troubleshooting","title":"Troubleshooting","text":""},{"location":"guides/configuration/#configuration-not-applied","title":"Configuration Not Applied","text":"<ul> <li>Check that environment variables are set before running the command</li> <li>Verify that the environment variable names are correct (case-sensitive)</li> <li>Ensure that the values are in the correct format</li> </ul>"},{"location":"guides/configuration/#invalid-values","title":"Invalid Values","text":"<ul> <li>Gas limits must be positive integers</li> <li>Boolean values must be \"true\" or \"false\"</li> <li>Log levels must be one of: \"trace\", \"debug\", \"info\", \"warn\", \"error\"</li> </ul>"},{"location":"guides/configuration/#performance-issues","title":"Performance Issues","text":"<ul> <li>Increase gas limits if transactions are failing due to out-of-gas errors</li> <li>Use appropriate log levels to reduce logging overhead</li> </ul>"},{"location":"guides/logging/","title":"Logging Configuration for EchoEVM","text":""},{"location":"guides/logging/#overview","title":"Overview","text":"<p>This document describes the logging system improvements made to EchoEVM to enhance reliability and debugging capabilities.</p>"},{"location":"guides/logging/#log-levels","title":"Log Levels","text":""},{"location":"guides/logging/#trace-0","title":"TRACE (0)","text":"<ul> <li>Usage: Detailed execution tracing</li> <li>Content: </li> <li>EVM opcode execution steps</li> <li>Stack operations (push/pop/dup/swap)</li> <li>Memory operations (load/store)</li> <li>Storage operations (sload/sstore)</li> <li>When to use: Debugging complex contract execution issues</li> </ul>"},{"location":"guides/logging/#debug-1","title":"DEBUG (1)","text":"<ul> <li>Usage: Detailed debugging information</li> <li>Content:</li> <li>Bytecode disassembly</li> <li>Configuration loading</li> <li>Performance metrics</li> <li>When to use: Development and testing</li> </ul>"},{"location":"guides/logging/#info-2","title":"INFO (2)","text":"<ul> <li>Usage: General operational information</li> <li>Content:</li> <li>Application startup/shutdown</li> <li>Contract execution results</li> <li>Block processing status</li> <li>When to use: Normal operation monitoring</li> </ul>"},{"location":"guides/logging/#warn-3","title":"WARN (3)","text":"<ul> <li>Usage: Warning conditions</li> <li>Content:</li> <li>Missing contract code</li> <li>Deprecated features</li> <li>Performance warnings</li> <li>When to use: Issues that don't stop execution but need attention</li> </ul>"},{"location":"guides/logging/#error-4","title":"ERROR (4)","text":"<ul> <li>Usage: Error conditions</li> <li>Content:</li> <li>EVM execution errors</li> <li>Stack errors (overflow/underflow)</li> <li>Configuration errors</li> <li>When to use: Issues that affect functionality</li> </ul>"},{"location":"guides/logging/#fatal-5","title":"FATAL (5)","text":"<ul> <li>Usage: Critical errors</li> <li>Content:</li> <li>Startup failures</li> <li>Critical configuration errors</li> <li>Unrecoverable system errors</li> <li>When to use: Issues that require immediate attention and stop execution</li> </ul>"},{"location":"guides/logging/#structured-logging-fields","title":"Structured Logging Fields","text":""},{"location":"guides/logging/#common-fields","title":"Common Fields","text":"<ul> <li><code>component</code>: The component generating the log (e.g., \"echoevm\", \"vm\")</li> <li><code>version</code>: Application version</li> <li><code>timestamp</code>: Log timestamp in RFC3339 format</li> </ul>"},{"location":"guides/logging/#evm-execution-fields","title":"EVM Execution Fields","text":"<ul> <li><code>pc</code>: Program counter (uint64)</li> <li><code>pc_hex</code>: Program counter in hex format (string)</li> <li><code>opcode</code>: Opcode byte value (uint8)</li> <li><code>opcode_name</code>: Human-readable opcode name (string)</li> <li><code>stack_size</code>: Current stack size (int)</li> <li><code>stack</code>: Stack contents as hex strings ([]string)</li> <li><code>gas</code>: Gas remaining (uint64)</li> </ul>"},{"location":"guides/logging/#transaction-fields","title":"Transaction Fields","text":"<ul> <li><code>tx_hash</code>: Transaction hash (string)</li> <li><code>block_number</code>: Block number (uint64)</li> <li><code>contract_address</code>: Contract address (string)</li> <li><code>function</code>: Function name (string)</li> <li><code>gas_used</code>: Gas consumed (uint64)</li> </ul>"},{"location":"guides/logging/#error-fields","title":"Error Fields","text":"<ul> <li><code>error</code>: Error message (string)</li> <li><code>error_type</code>: Type of error (string)</li> <li><code>stack_trace</code>: Stack trace for errors (string)</li> </ul>"},{"location":"guides/logging/#log-output-formats","title":"Log Output Formats","text":""},{"location":"guides/logging/#console-format-default","title":"Console Format (Default)","text":"<pre><code>2024-01-15T10:30:45.123Z INF EVM execution step component=echoevm pc=0x0000 opcode=0x60 opcode_name=PUSH1 stack_size=0\n2024-01-15T10:30:45.124Z INF RETURN operation executed component=echoevm offset=0x00 size=0x20 return_data_hex=0x1234... return_data_size=32\n</code></pre>"},{"location":"guides/logging/#json-format","title":"JSON Format","text":"<pre><code>{\n  \"level\": \"info\",\n  \"component\": \"echoevm\",\n  \"version\": \"1.0.0\",\n  \"timestamp\": \"2024-01-15T10:30:45.123Z\",\n  \"pc\": 0,\n  \"pc_hex\": \"0x0000\",\n  \"opcode\": 96,\n  \"opcode_name\": \"PUSH1\",\n  \"stack_size\": 0,\n  \"message\": \"EVM execution step\"\n}\n</code></pre>"},{"location":"guides/logging/#configuration","title":"Configuration","text":""},{"location":"guides/logging/#environment-variables","title":"Environment Variables","text":"<ul> <li><code>ECHOEVM_LOG_LEVEL</code>: Set log level (trace, debug, info, warn, error, fatal)</li> <li><code>ECHOEVM_LOG_FORMAT</code>: Set output format (console, json)</li> <li><code>ECHOEVM_LOG_OUTPUT</code>: Set output destination (stdout, stderr, file path)</li> </ul>"},{"location":"guides/logging/#command-line-flags","title":"Command Line Flags","text":"<ul> <li><code>--log-level</code>: Set log level</li> <li><code>--log-format</code>: Set output format</li> <li><code>--log-file</code>: Set log file path</li> </ul>"},{"location":"guides/logging/#best-practices","title":"Best Practices","text":""},{"location":"guides/logging/#1-use-appropriate-log-levels","title":"1. Use Appropriate Log Levels","text":"<ul> <li>Use TRACE for detailed execution tracing</li> <li>Use DEBUG for development debugging</li> <li>Use INFO for normal operation monitoring</li> <li>Use WARN for potential issues</li> <li>Use ERROR for actual errors</li> <li>Use FATAL only for critical failures</li> </ul>"},{"location":"guides/logging/#2-include-relevant-context","title":"2. Include Relevant Context","text":"<ul> <li>Always include component and version</li> <li>Include relevant IDs (tx_hash, trace_id, etc.)</li> <li>Include performance metrics when relevant</li> <li>Include error details with proper error handling</li> </ul>"},{"location":"guides/logging/#3-structured-logging","title":"3. Structured Logging","text":"<ul> <li>Use structured fields instead of string interpolation</li> <li>Use consistent field names across components</li> <li>Include both human-readable and machine-readable formats</li> </ul>"},{"location":"guides/logging/#4-performance-considerations","title":"4. Performance Considerations","text":"<ul> <li>Use TRACE level sparingly in production</li> <li>Consider log rotation for file output</li> <li>Use appropriate sampling for high-volume operations</li> </ul>"},{"location":"guides/logging/#5-security","title":"5. Security","text":"<ul> <li>Never log sensitive data (private keys, passwords)</li> <li>Be careful with user input in logs</li> <li>Consider log sanitization for external systems</li> </ul>"},{"location":"guides/logging/#migration-guide","title":"Migration Guide","text":""},{"location":"guides/logging/#from-old-logging-system","title":"From Old Logging System","text":"<ol> <li>Replace <code>fmt.Printf</code> with structured logging</li> <li>Replace <code>log.Println</code> with appropriate log levels</li> <li>Add context fields to existing log messages</li> <li>Update error handling to include structured error information</li> </ol>"},{"location":"guides/logging/#example-migration","title":"Example Migration","text":"<pre><code>// Old way\nfmt.Printf(\"Executing opcode 0x%02x at PC 0x%04x\\n\", opcode, pc)\n\n// New way\nlogger.Trace().\n    Uint8(\"opcode\", opcode).\n    Str(\"opcode_hex\", fmt.Sprintf(\"0x%02x\", opcode)).\n    Uint64(\"pc\", pc).\n    Str(\"pc_hex\", fmt.Sprintf(\"0x%04x\", pc)).\n    Msg(\"Executing opcode\")\n</code></pre>"},{"location":"guides/logging/#monitoring-and-alerting","title":"Monitoring and Alerting","text":""},{"location":"guides/logging/#key-metrics-to-monitor","title":"Key Metrics to Monitor","text":"<ul> <li>Error rate by component</li> <li>EVM execution success rate</li> <li>Memory and stack usage patterns</li> </ul>"},{"location":"guides/logging/#alerting-rules","title":"Alerting Rules","text":"<ul> <li>Error rate &gt; 5% over 5 minutes</li> <li>EVM execution failures &gt; 10% over 1 minute</li> <li>Memory usage &gt; 80% of available</li> </ul>"},{"location":"guides/logging/#troubleshooting","title":"Troubleshooting","text":""},{"location":"guides/logging/#common-issues","title":"Common Issues","text":"<ol> <li>High log volume: Increase log level or implement sampling</li> <li>Missing context: Ensure all log calls include relevant fields</li> <li>Performance impact: Use appropriate log levels and consider async logging</li> <li>Storage issues: Implement log rotation and compression</li> </ol>"},{"location":"guides/logging/#debug-commands","title":"Debug Commands","text":"<pre><code># Set debug level for detailed logging\nexport ECHOEVM_LOG_LEVEL=debug\n\n# Use JSON format for log aggregation\nexport ECHOEVM_LOG_FORMAT=json\n\n# Redirect logs to file\nexport ECHOEVM_LOG_OUTPUT=/var/log/echoevm.log\n</code></pre>"},{"location":"guides/testing/","title":"EchoEVM Testing Quick Start","text":""},{"location":"guides/testing/#quick-commands","title":"Quick Commands","text":"<pre><code># Run all tests\nmake test\n\n# Go unit tests only (with race detector)\nmake test-unit\n\n# Coverage report (Go packages)\nmake coverage\n</code></pre>"},{"location":"guides/testing/#test-fixtures","title":"Test Fixtures","text":"<p>EchoEVM uses the ethereum/tests repository as a git submodule for test fixtures.</p> <pre><code># Initialize test fixtures (required before running some tests)\nmake setup-tests\n</code></pre> <p>This will clone the Ethereum test fixtures into <code>tests/fixtures/</code>.</p>"},{"location":"guides/testing/#test-structure","title":"Test Structure","text":"<pre><code>tests/\n\u251c\u2500\u2500 fixtures/           # Git submodule: ethereum/tests\n\u251c\u2500\u2500 state_test.go       # State transition tests\n\u2514\u2500\u2500 genesis_test.json   # Genesis configuration for tests\n\ninternal/\n\u251c\u2500\u2500 evm/core/           # Core tests (stack, memory, genesis, opcodes)\n\u2514\u2500\u2500 evm/vm/             # VM tests (interpreter, operations)\n</code></pre>"},{"location":"guides/testing/#running-specific-tests","title":"Running Specific Tests","text":"<pre><code># Run a specific test file\ngo test -v ./internal/evm/core/stack_test.go\n\n# Run tests matching a pattern\ngo test -v ./... -run TestOpAdd\n\n# Run with race detector\ngo test -race ./...\n</code></pre>"},{"location":"guides/testing/#writing-tests","title":"Writing Tests","text":"<p>When adding new features: 1. Add unit tests in the relevant <code>*_test.go</code> file 2. Run <code>make test</code> to verify all tests pass 3. Run <code>make coverage</code> to check test coverage</p>"},{"location":"reference/cli/","title":"CLI Commands","text":"<p>EchoEVM provides a set of CLI commands to interact with the EVM.</p>"},{"location":"reference/cli/#overview","title":"Overview","text":"Command Description <code>run</code> Execute raw bytecode with optional debug tracing <code>deploy</code> Run constructor and extract runtime bytecode <code>call</code> Execute runtime bytecode with ABI encoding <code>trace</code> JSON line trace of opcode execution <code>disasm</code> Disassemble bytecode to human-readable opcodes <code>repl</code> Interactive EVM shell <code>web</code> Browser-based visual debugger <code>version</code> Display build metadata"},{"location":"reference/cli/#global-flags","title":"Global Flags","text":"<pre><code>--log-level, -L   Log level (trace|debug|info|warn|error)\n--output, -o      Output format (plain|json)\n--config, -c      Config file path (reserved)\n--rpc-url         Ethereum RPC endpoint\n</code></pre>"},{"location":"reference/cli/#command-details","title":"Command Details","text":""},{"location":"reference/cli/#deploy","title":"<code>deploy</code>","text":"<p>Run constructor bytecode and return the runtime bytecode.</p> <pre><code># From artifact\nechoevm deploy -a ./artifacts/Add.json --print\n\n# From raw bytecode file\nechoevm deploy -b ./constructor.bin --out-file runtime.bin\n</code></pre>"},{"location":"reference/cli/#call","title":"<code>call</code>","text":"<p>Execute runtime bytecode.</p> <pre><code># With ABI encoding (using artifact)\nechoevm call -a ./artifacts/Add.json -f \"add(uint256,uint256)\" -A \"2,40\"\n\n# With raw calldata and bytecode binary\nechoevm call -r ./runtime.bin -d 771602f70000...\n</code></pre>"},{"location":"reference/cli/#trace","title":"<code>trace</code>","text":"<p>Execute with granular tracing enabled.</p> <pre><code># Trace first 40 steps\nechoevm trace -a ./artifacts/Add.json -f \"add(uint256,uint256)\" -A \"1,2\" --limit 40 | jq .\n\n# Trace with full stack/memory state\nechoevm trace -a ./artifacts/Loops.json -f \"forLoop(uint256)\" -A 5 --full | jq .\n</code></pre>"},{"location":"reference/cli/#disasm","title":"<code>disasm</code>","text":"<p>Disassemble bytecode into readable opcodes.</p> <pre><code># From hex string\nechoevm disasm 6001600201\n\n# Output:\n# 0000: PUSH1 01\n# 0002: PUSH1 02\n# 0004: ADD\n</code></pre>"},{"location":"reference/cli/#repl","title":"<code>repl</code>","text":"<p>Start the interactive Read-Eval-Print Loop.</p> <pre><code>echoevm repl\n&gt; PUSH1 10 PUSH1 20 ADD\n</code></pre>"},{"location":"reference/cli/#web","title":"<code>web</code>","text":"<p>Start the web debugger UI.</p> <pre><code>echoevm web --code \"6001600201\"\n# Open http://localhost:8080 and click \"Run Trace\"\n</code></pre>"}]}